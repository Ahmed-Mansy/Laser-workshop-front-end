<mat-toolbar class="!bg-metal-900 !border-b-2 !border-laser-500 sticky top-0 z-50 shadow-lg">
    <div class="max-w-7xl mx-auto w-full flex justify-between items-center px-4 py-2">
        <!-- Logo -->
        <div class="flex items-center">
            <a routerLink="/" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/5 transition">
                <i class="fas fa-fire text-2xl text-laser-500"></i>
                <span class="text-xl md:text-2xl font-black text-fire">LASER SHOP</span>
            </a>
        </div>

        <!-- Desktop Navigation -->
        <div class="hidden lg:flex items-center gap-3">
            <!-- Language Toggle -->
            <button (click)="toggleLanguage()"
                class="group relative overflow-hidden px-4 py-2 rounded-xl bg-gradient-to-r from-metal-800 to-metal-900 border-2 border-metal-700 hover:border-laser-500 transition-all duration-300 hover:shadow-lg hover:shadow-laser-500/30 hover:scale-105"
                [title]="'Switch to ' + languageService.getOtherLanguageName()">
                <div
                    class="absolute inset-0 bg-gradient-to-r from-laser-500/0 via-laser-500/20 to-laser-500/0 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                </div>
                <div class="relative flex items-center gap-2">
                    <div
                        class="w-6 h-6 rounded-md bg-gradient-to-br from-laser-500 to-fire-500 flex items-center justify-center font-bold text-white text-xs fire-glow group-hover:rotate-12 transition-transform duration-300">
                        {{ languageService.currentLanguage() === 'en' ? 'EN' : 'AR' }}
                    </div>
                    <i
                        class="fas fa-exchange-alt text-gray-400 group-hover:text-laser-400 text-sm transition-colors duration-300 group-hover:scale-110"></i>
                    <div
                        class="w-6 h-6 rounded-md bg-metal-700 border border-metal-600 group-hover:border-fire-500 flex items-center justify-center font-bold text-gray-500 group-hover:text-white text-xs transition-all duration-300 group-hover:-rotate-12">
                        {{ languageService.currentLanguage() === 'en' ? 'AR' : 'EN' }}
                    </div>
                </div>
            </button>

            <!-- Nav Links -->
            @if (!(authService.currentUser())) {
            <a mat-button routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}"
                class="!text-gray-300 hover:!text-laser-400 !font-semibold !transition">
                <i class="fas fa-home mr-2"></i>
                {{ 'navbar.home' | translate }}
            </a>
            <a mat-button routerLink="/showcase" routerLinkActive="active"
                class="!text-gray-300 hover:!text-fire-400 !font-semibold !transition">
                <i class="fas fa-images mr-2"></i>
                {{ 'navbar.showcase' | translate }}
            </a>
            <a mat-raised-button routerLink="/login"
                class="!bg-fire-gradient !text-white !font-bold !px-6 !rounded-lg hover:!shadow-fire">
                <i class="fas fa-bolt mr-2"></i>
                {{ 'navbar.login' | translate }}
            </a>
            } @else {
            @if (authService.isManager()) {
            <a mat-button routerLink="/manager" routerLinkActive="active"
                class="!text-gray-300 hover:!text-laser-400 !font-semibold">
                <i class="fas fa-fire mr-2"></i>
                {{ 'navbar.dashboard' | translate }}
            </a>
            <a mat-button routerLink="/manager/orders" routerLinkActive="active"
                class="!text-gray-300 hover:!text-fire-400 !font-semibold">
                <i class="fas fa-clipboard-list mr-2"></i>
                {{ 'navbar.orders' | translate }}
            </a>
            <a mat-button routerLink="/manager/employees" routerLinkActive="active"
                class="!text-gray-300 hover:!text-spark-400 !font-semibold">
                <i class="fas fa-users mr-2"></i>
                {{ 'navbar.employees' | translate }}
            </a>
            }
            @if (authService.isWorker()) {
            <a mat-button routerLink="/worker/orders" routerLinkActive="active"
                class="!text-gray-300 hover:!text-fire-400 !font-semibold">
                <i class="fas fa-clipboard-list mr-2"></i>
                {{ 'navbar.orders' | translate }}
            </a>
            }
            <button mat-button [matMenuTriggerFor]="userMenu"
                class="!bg-metal-800 !border-2 !border-metal-700 hover:!border-laser-500 !text-white !px-4 !rounded-lg !transition">
                <i class="fas fa-user-circle mr-2 text-laser-400"></i>
                <span>{{ authService.currentUser()?.username }}</span>
            </button>
            <mat-menu #userMenu="matMenu" class="!bg-metal-800">
                <button mat-menu-item disabled class="!text-gray-400">
                    <i class="fas fa-id-badge mr-2 text-fire-400"></i>
                    <span>{{ authService.currentUser()?.role }}</span>
                </button>
                <button mat-menu-item (click)="logout()" class="!text-white hover:!bg-laser-500/20">
                    <i class="fas fa-sign-out-alt mr-2 text-laser-500"></i>
                    <span>{{ 'navbar.logout' | translate }}</span>
                </button>
            </mat-menu>
            }
        </div>

        <!-- Mobile Menu Button -->
        <button (click)="toggleMobileMenu()"
            class="lg:hidden w-12 h-12 flex items-center justify-center rounded-lg bg-metal-800 border-2 border-metal-700 hover:border-laser-500 transition-all">
            <i class="fas text-xl text-laser-400" [class.fa-bars]="!mobileMenuOpen"
                [class.fa-times]="mobileMenuOpen"></i>
        </button>
    </div>

    <!-- Mobile Menu -->
    @if (mobileMenuOpen) {
    <div
        class="lg:hidden absolute top-full left-0 right-0 bg-metal-900 border-b-2 border-laser-500 shadow-2xl animate-slideDown">
        <div class="flex flex-col p-4 space-y-2">
            <!-- Language Toggle (Mobile) -->
            <button (click)="toggleLanguage()"
                class="group relative overflow-hidden px-4 py-3 rounded-xl bg-gradient-to-r from-metal-800 to-metal-900 border-2 border-metal-700 hover:border-laser-500 transition-all">
                <div class="relative flex items-center justify-center gap-2">
                    <div
                        class="w-8 h-8 rounded-md bg-gradient-to-br from-laser-500 to-fire-500 flex items-center justify-center font-bold text-white text-sm fire-glow">
                        {{ languageService.currentLanguage() === 'en' ? 'EN' : 'AR' }}
                    </div>
                    <i class="fas fa-exchange-alt text-gray-400 text-lg"></i>
                    <div
                        class="w-8 h-8 rounded-md bg-metal-700 border border-metal-600 flex items-center justify-center font-bold text-gray-500 text-sm">
                        {{ languageService.currentLanguage() === 'en' ? 'AR' : 'EN' }}
                    </div>
                </div>
            </button>

            <!-- Mobile Nav Links -->
            @if (!(authService.currentUser())) {
            <a routerLink="/" routerLinkActive="!bg-laser-500/20" [routerLinkActiveOptions]="{exact: true}"
                (click)="closeMobileMenu()"
                class="flex items-center gap-3 px-4 py-3 rounded-lg bg-metal-800 hover:bg-laser-500/20 text-gray-300  hover:text-laser-400 font-semibold transition-all">
                <i class="fas fa-home text-xl"></i>
                <span>{{ 'navbar.home' | translate }}</span>
            </a>
            <a routerLink="/showcase" routerLinkActive="!bg-fire-500/20" (click)="closeMobileMenu()"
                class="flex items-center gap-3 px-4 py-3 rounded-lg bg-metal-800 hover:bg-fire-500/20 text-gray-300 hover:text-fire-400 font-semibold transition-all">
                <i class="fas fa-images text-xl"></i>
                <span>{{ 'navbar.showcase' | translate }}</span>
            </a>
            <a routerLink="/login" (click)="closeMobileMenu()"
                class="flex items-center justify-center gap-3 px-4 py-4 rounded-lg bg-fire-gradient text-white font-bold transition-all hover:shadow-lg hover:shadow-fire-500/50">
                <i class="fas fa-bolt text-xl"></i>
                <span>{{ 'navbar.login' | translate }}</span>
            </a>
            } @else {
            @if (authService.isManager()) {
            <a routerLink="/manager" routerLinkActive="!bg-laser-500/20" (click)="closeMobileMenu()"
                class="flex items-center gap-3 px-4 py-3 rounded-lg bg-metal-800 hover:bg-laser-500/20 text-gray-300 hover:text-laser-400 font-semibold transition-all">
                <i class="fas fa-fire text-xl"></i>
                <span>{{ 'navbar.dashboard' | translate }}</span>
            </a>
            <a routerLink="/manager/orders" routerLinkActive="!bg-fire-500/20" (click)="closeMobileMenu()"
                class="flex items-center gap-3 px-4 py-3 rounded-lg bg-metal-800 hover:bg-fire-500/20 text-gray-300 hover:text-fire-400 font-semibold transition-all">
                <i class="fas fa-clipboard-list text-xl"></i>
                <span>{{ 'navbar.orders' | translate }}</span>
            </a>
            <a routerLink="/manager/employees" routerLinkActive="!bg-spark-500/20" (click)="closeMobileMenu()"
                class="flex items-center gap-3 px-4 py-3 rounded-lg bg-metal-800 hover:bg-spark-500/20 text-gray-300 hover:text-spark-400 font-semibold transition-all">
                <i class="fas fa-users text-xl"></i>
                <span>{{ 'navbar.employees' | translate }}</span>
            </a>
            }
            @if (authService.isWorker()) {
            <a routerLink="/worker/orders" routerLinkActive="!bg-fire-500/20" (click)="closeMobileMenu()"
                class="flex items-center gap-3 px-4 py-3 rounded-lg bg-metal-800 hover:bg-fire-500/20 text-gray-300 hover:text-fire-400 font-semibold transition-all">
                <i class="fas fa-clipboard-list text-xl"></i>
                <span>{{ 'navbar.orders' | translate }}</span>
            </a>
            }

            <!-- User Info Mobile -->
            <div class="flex items-center gap-3 px-4 py-3 rounded-lg bg-metal-800 border-2 border-metal-700 text-white">
                <i class="fas fa-user-circle text-xl text-laser-400"></i>
                <div class="flex-1">
                    <div class="font-bold">{{ authService.currentUser()?.username }}</div>
                    <div class="text-xs text-gray-400">{{ authService.currentUser()?.role }}</div>
                </div>
            </div>

            <!-- Logout Button Mobile -->
            <button (click)="logout()"
                class="flex items-center justify-center gap-3 px-4 py-4 rounded-lg bg-red-600 hover:bg-red-500 text-white font-bold transition-all">
                <i class="fas fa-sign-out-alt text-xl"></i>
                <span>{{ 'navbar.logout' | translate }}</span>
            </button>
            }
        </div>
    </div>
    }
</mat-toolbar>