<div class="bg-metal-900 rounded-lg overflow-hidden w-full max-w-2xl">
    <!-- Header -->
    <div
        class="flex justify-between items-center px-6 py-5 bg-gradient-to-r from-metal-900 to-metal-800 border-b-2 border-laser-500">
        <h2 class="text-2xl font-bold text-white flex items-center gap-3">
            <i class="fas text-laser-500" [class.fa-plus-circle]="!isEditMode" [class.fa-edit]="isEditMode"></i>
            {{ isEditMode ? 'Edit Order' : 'Add New Order' }}
        </h2>
        <button type="button" (click)="onCancel()" [disabled]="isLoading"
            class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-laser-500/20 transition-all duration-300 hover:rotate-90 disabled:opacity-50">
            <i class="fas fa-times text-laser-500 text-xl"></i>
        </button>
    </div>

    <!-- Content - SCROLLABLE -->
    <div class="px-6 py-6 max-h-[55vh] overflow-y-auto">
        <form [formGroup]="orderForm" class="space-y-5">
            <!-- Customer Name -->
            <div>
                <label class="block text-sm font-medium text-metal-300 mb-2">
                    <i class="fas fa-user text-fire-500 mr-2"></i>
                    Customer Name
                </label>
                <input type="text" formControlName="customer_name"
                    class="w-full px-4 py-3 bg-metal-800 border-2 border-metal-700 rounded-lg text-white placeholder-metal-500 focus:border-laser-500 focus:outline-none focus:ring-2 focus:ring-laser-500/20 transition-all duration-300"
                    placeholder="Enter customer name">
                @if (orderForm.get('customer_name')?.hasError('required') && orderForm.get('customer_name')?.touched) {
                <p class="text-laser-500 text-sm mt-1">Customer name is required</p>
                }
            </div>

            <!-- Customer Phone -->
            <div>
                <label class="block text-sm font-medium text-metal-300 mb-2">
                    <i class="fas fa-phone text-fire-500 mr-2"></i>
                    Customer Phone
                </label>
                <input type="tel" formControlName="customer_phone"
                    class="w-full px-4 py-3 bg-metal-800 border-2 border-metal-700 rounded-lg text-white placeholder-metal-500 focus:border-laser-500 focus:outline-none focus:ring-2 focus:ring-laser-500/20 transition-all duration-300"
                    placeholder="Enter phone number">
                @if (orderForm.get('customer_phone')?.hasError('required') && orderForm.get('customer_phone')?.touched)
                {
                <p class="text-laser-500 text-sm mt-1">Customer phone is required</p>
                }
            </div>

            <!-- Order Details -->
            <div>
                <label class="block text-sm font-medium text-metal-300 mb-2">
                    <i class="fas fa-file-alt text-fire-500 mr-2"></i>
                    Order Details
                </label>
                <textarea formControlName="order_details" rows="4"
                    class="w-full px-4 py-3 bg-metal-800 border-2 border-metal-700 rounded-lg text-white placeholder-metal-500 focus:border-laser-500 focus:outline-none focus:ring-2 focus:ring-laser-500/20 transition-all duration-300 resize-none"
                    placeholder="Describe the order details..."></textarea>
                @if (orderForm.get('order_details')?.hasError('required') && orderForm.get('order_details')?.touched) {
                <p class="text-laser-500 text-sm mt-1">Order details are required</p>
                }
            </div>

            <!-- Status -->
            <div>
                <label class="block text-sm font-medium text-metal-300 mb-2">
                    <i class="fas fa-tasks text-fire-500 mr-2"></i>
                    Status
                </label>
                <select formControlName="status"
                    class="w-full px-4 py-3 bg-metal-800 border-2 border-metal-700 rounded-lg text-white focus:border-laser-500 focus:outline-none focus:ring-2 focus:ring-laser-500/20 transition-all duration-300 cursor-pointer">
                    <option value="UNDER_WORK">Under Work</option>
                    <option value="DESIGNING">Designing</option>
                    <option value="DESIGN_COMPLETED">Design Completed</option>
                    <option value="DELIVERED">Delivered</option>
                </select>
            </div>

            <!-- Price -->
            <div>
                <label class="block text-sm font-medium text-metal-300 mb-2">
                    <i class="fas fa-dollar-sign text-fire-500 mr-2"></i>
                    Price (Optional)
                </label>
                <input type="number" formControlName="price" min="0" step="0.01"
                    class="w-full px-4 py-3 bg-metal-800 border-2 border-metal-700 rounded-lg text-white placeholder-metal-500 focus:border-laser-500 focus:outline-none focus:ring-2 focus:ring-laser-500/20 transition-all duration-300"
                    placeholder="Enter price">
            </div>

            <!-- File Upload -->
            <div>
                <label class="block text-sm font-medium text-metal-300 mb-2">
                    <i class="fas fa-image text-fire-500 mr-2"></i>
                    Order Image (Optional)
                </label>
                <label for="file-input"
                    class="flex items-center justify-center gap-3 px-6 py-4 bg-metal-800/50 border-2 border-dashed border-metal-600 rounded-lg cursor-pointer hover:border-laser-500 hover:bg-metal-800 transition-all duration-300 group">
                    <i
                        class="fas fa-cloud-upload-alt text-3xl text-laser-500 group-hover:scale-110 transition-transform duration-300"></i>
                    <span class="text-metal-400 font-medium group-hover:text-white transition-colors duration-300">
                        {{ selectedFile ? selectedFile.name : 'Click to upload image' }}
                    </span>
                </label>
                <input id="file-input" type="file" accept="image/*" (change)="onFileSelected($event)" class="hidden">
            </div>
        </form>
    </div>

    <!-- Actions - ALWAYS VISIBLE AT BOTTOM -->
    <div class="flex justify-end gap-3 px-6 py-5 bg-metal-800/50 border-t border-metal-700">
        <button type="button" (click)="onCancel()" [disabled]="isLoading"
            class="px-6 py-3 bg-metal-800 text-white rounded-lg font-semibold hover:bg-metal-700 transition-all duration-300 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed border border-metal-600">
            <i class="fas fa-times"></i>
            Cancel
        </button>
        <button type="button" (click)="onSubmit()" [disabled]="orderForm.invalid || isLoading"
            class="px-6 py-3 bg-gradient-to-r from-laser-500 to-fire-500 text-white rounded-lg font-semibold hover:shadow-fire hover:scale-105 transition-all duration-300 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100">
            @if (isLoading) {
            <i class="fas fa-spinner fa-spin"></i>
            <span>{{ isEditMode ? 'Updating...' : 'Creating...' }}</span>
            } @else {
            <i class="fas fa-check"></i>
            <span>{{ isEditMode ? 'Update Order' : 'Create Order' }}</span>
            }
        </button>
    </div>
</div>